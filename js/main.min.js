var playlist=[],current_wave="",current_track="",audio_player=document.getElementById("audio_player"),src=document.getElementById("src");function initMap(){new google.maps.Map(document.getElementById("map"),{center:{lat:50.4021702,lng:30.3926088},zoom:12,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#002b08"},{lightness:"1"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#005919"},{lightness:"0"},{weight:1.2}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#00ff3c"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#ff0000"}]},{featureType:"landscape",elementType:"labels.text.fill",stylers:[{color:"#00ff1c"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#005a02"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#0c5116"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#007a12"},{lightness:"-26"},{saturation:"-27"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#00ff12"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#025201"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#006317"},{lightness:"-8"},{saturation:"-20"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#008d15"},{lightness:17},{weight:"1.75"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:"-4"},{weight:"1.10"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{weight:"7.53"},{color:"#000000"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#03a100"},{weight:"3.02"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{lightness:18}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#00ff1c"},{weight:"1.64"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#000000"},{weight:"2.70"},{saturation:"32"},{lightness:"-6"},{visibility:"on"}]},{featureType:"road.arterial",elementType:"labels.text",stylers:[{visibility:"on"},{color:"#211010"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#000000"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{color:"#007803"}]},{featureType:"road.local",elementType:"geometry",stylers:[{lightness:16},{visibility:"on"},{color:"#000000"},{weight:"0.65"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#003503"},{lightness:"1"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#001f00"},{lightness:"2"}]},{featureType:"water",elementType:"labels.text",stylers:[{color:"#008909"}]}]})}function getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}function playVideo(){var e=document.getElementById("video");e.play(),e.addEventListener("ended",function(){$(".main video").hide(),$(".main .content").show()})}function getplaylist(){var a=$(".player"),l=$(".wave.current").attr("data-wave"),r="";$.ajax({url:"get-playlist.php",type:"POST",data:{wave:l},dataType:"json",error:function(){alert("При выполнении запроса произошла ошибка")},success:function(e){playlist=e,src.src=playlist[0].path,a.attr("data-wave",l),current_wave=l,a.attr("data-track",0);for(var t=current_track=0;t<playlist.length;t++)r+=0===t?'<div class="track current">'+playlist[t].name+"</div>":'<div class="track">'+playlist[t].name+"</div>";$(".music_list .wrapper").html(r),$(".music_list").mCustomScrollbar("update"),audio_player.load(),play_wave()}})}function playToggler(){$(".play").toggleClass("active"),$(".wave.current").toggleClass("active")}function play_wave(){audio_player.paused&&audio_player.play(),$(".play").addClass("active"),$(".wave.current").addClass("active"),$(".music_list").mCustomScrollbar("scrollTo",$(".track.current"))}function pause_wave(){audio_player.paused||(audio_player.pause(),$(".play").removeClass("active"),$(".wave.current").removeClass("active"))}function play_next(){var e;e=$(".shuffle").hasClass("off")?current_track+2>playlist.length?0:current_track+1:getRandomInt(playlist.length),src.src=playlist[e].path,$(".player").attr("data-track",e),current_track=e,$(".track").removeClass("current"),$(".track:eq("+current_track+")").addClass("current"),audio_player.load(),play_wave()}function playPause(){audio_player.paused?audio_player.play():audio_player.pause(),playToggler()}function setVolume(e){audio_player.volume=e}audio_player.addEventListener("ended",function(){if($(".repeat").hasClass("off"))return $(".play").removeClass("active"),void $(".wave.current").removeClass("active");play_next()}),$(document).ready(function(){playVideo(),$(".music_list").mCustomScrollbar();var e=$(".prev"),a=$(".play"),t=$(".next"),l=$(".mute");$(".repeat");$(".play, .pause").click(function(){audio_player.paused?audio_player.play():audio_player.pause(),playToggler()}),l.click(function(){$(this).toggleClass("muted"),$(this).hasClass("muted")?audio_player.muted=!0:audio_player.muted=!1}),$(".repeat, .shuffle").click(function(){$(this).toggleClass("off")}),e.click(function(){var e;e=$(".shuffle").hasClass("off")?0===current_track?playlist.length-1:current_track-1:getRandomInt(playlist.length),src.src=playlist[e].path,$(".player").attr("data-track",e),current_track=e,$(".track").removeClass("current"),$(".track:eq("+current_track+")").addClass("current"),audio_player.load(),play_wave()}),t.click(function(){play_next()}),$(".nav_el").click(function(){$(".nav_el, .screen").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-nav"),t=$('*[data-screen="'+e+'"]');t.addClass("active"),t.hasClass("radio")&&!a.hasClass("active")&&getplaylist()}),$(".wave").click(function(){$(".wave").removeClass("current active"),$(this).addClass("current");$(this).attr("data-wave");getplaylist()})});